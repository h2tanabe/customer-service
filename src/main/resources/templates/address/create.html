<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>顧客管理</title>
<link th:replace="parts/header :: link" />
</head>
<body>

	<div id="wrapper">
		<div th:replace="parts/menubar :: nav"></div>
	</div>

	<div id="page-wrapper">
		<div class="row">
			<div class="col-lg-12">
				<h3 class="page-header">住所マスタ作成</h3>
			</div>
		</div>
		<div class="row">
			<div class="form-group">
				<p>郵便局からマスタデータを取り込み更新</p>
			</div>
		</div>
		<br />
		<form th:action="@{/api/address/create}" enctype="multipart/form-data" id="send-form" method="post">
		<!-- <form th:action="@{/address/create}" enctype="multipart/form-data" id="create-form" method="post"> -->
			<div class="col-md-12">
				<fieldset>
					<input type="file" name="upload_file" id="upload_file"
						class="col-lg-5 btn btn-outline btn-primary btn-create" />
						<i class="fa fa-leaf"></i>登録
						<input id="submitBtn" type="submit" class="btn btn-warning" />送信
				</fieldset>
			</div>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		</form>
		<br />
		<div class="container col-md-12">
			<p>Progress Bar:</p>
			<div class="progress">
				<div class="progress-bar progress-bar-striped active"
					role="progressbar" aria-valuenow="0" aria-valuemin="0"
					aria-valuemax="100" style="width: 0%">20%</div>
			</div>
		</div>
	</div>
	<script th:inline="javascript">
		/*<![CDATA[*/
		$("#submitBtn").on("click", function() {
			$('.progress-bar').css('width', '20%');
			var ajaxUrl = "/api/address/create";
			var form = $('#send-form').get()[0];
			var formData = new FormData(form);
			$('.progress-bar').css('width', '60%');
			$.ajax({
				type : "POST", // HTTP通信の種類
				url : ajaxUrl, // リクエストを送信する先のURL
				dataType : "json", // サーバーから返されるデータの型
				data : formData, // サーバーに送信するデータ
				processData : false,
				contentType : false,
			}).done(function(data) { // Ajax通信が成功した時の処理
				alert("アップロードが完了しました。");
			}).fail(function(data) { // Ajax通信が失敗した時の処理
				alert("アップロードが失敗しました。" + " Data :" + data);
			});
		});
		/*]]>*/
	</script>
</body>
</html>